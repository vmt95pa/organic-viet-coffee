{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Tooltip, Modal, Form, Input, message, Breadcrumb } from \"antd\";\nimport Link from \"next/link\";\nimport { onRemoveProductFromCart, onChangeProductCartQuantity } from \"../../common/cartServices\";\nimport { fetchCartRequest } from \"../../redux/actions/cartActions\";\nimport { formatCurrency } from \"../../common/utils\";\nimport { calculateTotalPrice, checkProductCartQuantity } from \"../../common/shopUtils\";\nimport LayoutOne from \"../../components/layout/LayoutOne\";\nimport Container from \"../../components/other/Container\";\nimport FetchDataHandle from \"../../components/other/FetchDataHandle\";\nimport QuantitySelector from \"../../components/other/QuantitySelector\";\nimport ShopOrderStep from \"../../components/shop/ShopOrderStep\";\nimport PartnerOne from \"../../components/sections/partners/PartnerOne\";\n\nfunction cart() {\n  var dispatch = useDispatch();\n\n  var _useState = useState({\n    visible: false,\n    message: \"Add some message\",\n    cartId: null\n  }),\n      modalState = _useState[0],\n      setModalState = _useState[1];\n\n  var cartState = useSelector(function (state) {\n    return state.cartReducer;\n  });\n  useEffect(function () {\n    dispatch(fetchCartRequest());\n  }, []);\n\n  var showModal = function showModal(message, cartId) {\n    setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n      visible: true,\n      message: message,\n      cartId: cartId\n    }));\n  };\n\n  var onChangeQuantity = function onChangeQuantity(product, quantity) {\n    onChangeProductCartQuantity({\n      product: product,\n      quantity: quantity,\n      onSuccess: function onSuccess() {\n        return dispatch(fetchCartRequest());\n      }\n    });\n  };\n\n  var handleOk = function handleOk(e) {\n    onRemoveProductFromCart({\n      cartId: modalState.cartId,\n      onSuccess: function onSuccess() {\n        setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n          visible: false\n        }));\n        message.success(\"Product removed from cart\");\n        dispatch(fetchCartRequest());\n      },\n      onError: function onError(mes) {\n        setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n          visible: false\n        }));\n        message.error(mes);\n      }\n    });\n  };\n\n  var handleCancel = function handleCancel(e) {\n    setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n      visible: false\n    }));\n  };\n\n  var onSubmitCoupon = function onSubmitCoupon(values) {\n    console.log(\"Success:\", values);\n  };\n\n  var onSubmitCouponFailed = function onSubmitCouponFailed(errorInfo) {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  return __jsx(LayoutOne, {\n    title: \"Shopping Cart\"\n  }, __jsx(Container, null, __jsx(Breadcrumb, {\n    separator: \">\"\n  }, __jsx(Breadcrumb.Item, null, __jsx(\"i\", {\n    className: \"fas fa-home\"\n  }), \"Home\"), __jsx(Breadcrumb.Item, null, \"Shop\"), __jsx(Breadcrumb.Item, null, \"Cart\")), __jsx(ShopOrderStep, {\n    current: 1\n  }), __jsx(FetchDataHandle, {\n    emptyDescription: \"No product in cart\",\n    data: cartState,\n    renderData: function renderData(data) {\n      return __jsx(\"div\", {\n        className: \"cart\"\n      }, __jsx(\"div\", {\n        className: \"shop-table\"\n      }, __jsx(\"table\", null, __jsx(\"colgroup\", null, __jsx(\"col\", {\n        style: {\n          width: 150 / 16 + \"em\"\n        }\n      }), __jsx(\"col\", {\n        style: {\n          width: \"25%\"\n        }\n      }), __jsx(\"col\", {\n        style: {\n          width: \"20%\"\n        }\n      }), __jsx(\"col\", {\n        style: {\n          width: \"20%\"\n        }\n      }), __jsx(\"col\", {\n        style: {\n          width: \"20%\"\n        }\n      }), __jsx(\"col\", {\n        style: {\n          width: \"15%\"\n        }\n      })), __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Image\"), __jsx(\"th\", null, \"Product Name\"), __jsx(\"th\", null, \"Price\"), __jsx(\"th\", null, \"Quantity\"), __jsx(\"th\", null, \"Total\"), __jsx(\"th\", null, __jsx(Tooltip, {\n        title: \"Clear cart\"\n      }, __jsx(Button, {\n        onClick: function onClick() {\n          return showModal(\"Are you sure to remove alll product from cart\");\n        },\n        icon: __jsx(\"i\", {\n          className: \"fal fa-times\"\n        })\n      }))))), __jsx(\"tbody\", null, data.map(function (item, index) {\n        return __jsx(\"tr\", {\n          key: index\n        }, __jsx(\"td\", {\n          className: \"table-img\"\n        }, __jsx(\"div\", {\n          className: \"table-img-wrapper\"\n        }, __jsx(\"img\", {\n          src: process.env.PUBLIC_URL + item.coverImage,\n          alt: \"Product image\"\n        }))), __jsx(\"td\", {\n          className: \"table-name\"\n        }, item.name), __jsx(\"td\", {\n          className: \"table-price\"\n        }, formatCurrency(item.price)), __jsx(\"td\", null, __jsx(QuantitySelector, {\n          max: item.quantity,\n          onChange: function onChange(val) {\n            return onChangeQuantity(item, val);\n          },\n          defaultValue: item.cartQuantity\n        })), __jsx(\"td\", {\n          className: \"table-total\"\n        }, formatCurrency(item.price * item.cartQuantity)), __jsx(\"td\", {\n          className: \"table-remove\"\n        }, __jsx(Tooltip, {\n          title: \"Remove product\"\n        }, __jsx(Button, {\n          onClick: function onClick() {\n            return showModal(\"Are you sure to remove this product from cart\", item.id);\n          },\n          icon: __jsx(\"i\", {\n            className: \"fal fa-times\"\n          })\n        }))));\n      })))), __jsx(\"div\", {\n        className: \"cart-footer\"\n      }, __jsx(\"div\", {\n        className: \"cart-footer__promo\"\n      }, __jsx(Form, {\n        name: \"basic\",\n        onFinish: onSubmitCoupon,\n        onFinishFailed: onSubmitCouponFailed\n      }, __jsx(Form.Item, {\n        name: \"promo\",\n        rules: [{\n          required: true,\n          message: \"Please provide a coupon code\"\n        }]\n      }, __jsx(Input, {\n        placeholder: \"Coupon code\"\n      })), __jsx(Form.Item, null, __jsx(Button, {\n        type: \"primary\",\n        htmlType: \"submit\"\n      }, \"Apply coupon\")))), __jsx(Button, {\n        className: \"cart-footer__update\",\n        type: \"primary\"\n      }, __jsx(Link, {\n        href: process.env.PUBLIC_URL + \"/shop/shop-3-column\"\n      }, __jsx(\"a\", null, \"Update cart\")))), __jsx(\"div\", {\n        className: \"cart-total\"\n      }, __jsx(\"h5\", null, \"Cart total\"), __jsx(\"table\", null, __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"SUBTOTAL\"), __jsx(\"td\", null, formatCurrency(calculateTotalPrice(cartState.data)))), __jsx(\"tr\", null, __jsx(\"th\", null, \"SHIPPING\"), __jsx(\"td\", null, __jsx(\"p\", null, \"Free shipping\"), __jsx(\"p\", null, \"Calculate shipping\"))), __jsx(\"tr\", null, __jsx(\"th\", null, \"Total\"), __jsx(\"td\", null, formatCurrency(calculateTotalPrice(cartState.data)))))), __jsx(\"div\", {\n        className: \"cart-total__checkout\"\n      }, __jsx(Button, {\n        type: \"primary\",\n        shape: \"round\"\n      }, __jsx(Link, {\n        href: process.env.PUBLIC_URL + \"/shop/checkout\"\n      }, __jsx(\"a\", null, \"Proceed to Checkout\"))), __jsx(\"span\", null, \"-\"), __jsx(Button, {\n        type: \"link\"\n      }, __jsx(Link, {\n        href: process.env.PUBLIC_URL + \"#\"\n      }, __jsx(\"a\", null, \"Check out with PayPal\"))))));\n    }\n  }), __jsx(PartnerOne, null)), __jsx(Modal, {\n    visible: modalState.visible,\n    onOk: handleOk,\n    onCancel: handleCancel\n  }, __jsx(\"p\", null, modalState.message)));\n}\n\nexport default /*#__PURE__*/React.memo(cart);","map":null,"metadata":{},"sourceType":"module"}