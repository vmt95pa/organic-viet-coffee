{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Tooltip, Modal, Form, Input, message, Breadcrumb } from \"antd\";\nimport Link from \"next/link\";\nimport { onRemoveProductFromCart, onChangeProductCartQuantity } from \"../../common/cartServices\";\nimport { fetchCartRequest } from \"../../redux/actions/cartActions\";\nimport { formatCurrency } from \"../../common/utils\";\nimport { calculateTotalPrice, checkProductCartQuantity } from \"../../common/shopUtils\";\nimport LayoutOne from \"../../components/layout/LayoutOne\";\nimport Container from \"../../components/other/Container\";\nimport FetchDataHandle from \"../../components/other/FetchDataHandle\";\nimport QuantitySelector from \"../../components/other/QuantitySelector\";\nimport ShopOrderStep from \"../../components/shop/ShopOrderStep\";\nimport PartnerOne from \"../../components/sections/partners/PartnerOne\";\n\nfunction cart() {\n  const dispatch = useDispatch();\n  const {\n    0: modalState,\n    1: setModalState\n  } = useState({\n    visible: false,\n    message: \"Add some message\",\n    cartId: null\n  });\n  const cartState = useSelector(state => state.cartReducer);\n  useEffect(() => {\n    dispatch(fetchCartRequest());\n  }, []);\n\n  const showModal = (message, cartId) => {\n    setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n      visible: true,\n      message: message,\n      cartId\n    }));\n  };\n\n  const onChangeQuantity = (product, quantity) => {\n    onChangeProductCartQuantity({\n      product,\n      quantity: quantity,\n      onSuccess: () => dispatch(fetchCartRequest())\n    });\n  };\n\n  const handleOk = e => {\n    onRemoveProductFromCart({\n      cartId: modalState.cartId,\n      onSuccess: () => {\n        setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n          visible: false\n        }));\n        message.success(\"Product removed from cart\");\n        dispatch(fetchCartRequest());\n      },\n      onError: mes => {\n        setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n          visible: false\n        }));\n        message.error(mes);\n      }\n    });\n  };\n\n  const handleCancel = e => {\n    setModalState(_objectSpread(_objectSpread({}, modalState), {}, {\n      visible: false\n    }));\n  };\n\n  const onSubmitCoupon = values => {\n    console.log(\"Success:\", values);\n  };\n\n  const onSubmitCouponFailed = errorInfo => {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  return __jsx(LayoutOne, {\n    title: \"Gi\\u1ECF H\\xE0ng\"\n  }, __jsx(Container, null, __jsx(Breadcrumb, {\n    separator: \">\"\n  }, __jsx(Breadcrumb.Item, null, __jsx(\"i\", {\n    className: \"fas fa-home\"\n  }), \"Trang ch\\u1EE7\"), __jsx(Breadcrumb.Item, null, \"S\\u1EA3n ph\\u1EA9m\"), __jsx(Breadcrumb.Item, null, \"Gi\\u1ECF h\\xE0ng\")), __jsx(ShopOrderStep, {\n    current: 1\n  }), __jsx(FetchDataHandle, {\n    emptyDescription: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m trong gi\\u1ECF h\\xE0ng\",\n    data: cartState,\n    renderData: data => __jsx(\"div\", {\n      className: \"cart\"\n    }, __jsx(\"div\", {\n      className: \"shop-table\"\n    }, __jsx(\"table\", null, __jsx(\"colgroup\", null, __jsx(\"col\", {\n      style: {\n        width: 150 / 16 + \"em\"\n      }\n    }), __jsx(\"col\", {\n      style: {\n        width: \"25%\"\n      }\n    }), __jsx(\"col\", {\n      style: {\n        width: \"20%\"\n      }\n    }), __jsx(\"col\", {\n      style: {\n        width: \"20%\"\n      }\n    }), __jsx(\"col\", {\n      style: {\n        width: \"20%\"\n      }\n    }), __jsx(\"col\", {\n      style: {\n        width: \"15%\"\n      }\n    })), __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"S\\u1EA3n ph\\u1EA9m\"), __jsx(\"th\", null), __jsx(\"th\", null, \"\\u0110\\u01A1n gi\\xE1\"), __jsx(\"th\", null, \"S\\u1ED1 l\\u01B0\\u1EE3ng\"), __jsx(\"th\", null, \"Th\\xE0nh ti\\u1EC1n\"), __jsx(\"th\", null, __jsx(Tooltip, {\n      title: \"Clear cart\"\n    }, __jsx(Button, {\n      onClick: () => showModal(\"Are you sure to remove alll product from cart\"),\n      icon: __jsx(\"i\", {\n        className: \"fal fa-times\"\n      })\n    }))))), __jsx(\"tbody\", null, data.map((item, index) => __jsx(\"tr\", {\n      key: index\n    }, __jsx(\"td\", {\n      className: \"table-img\"\n    }, __jsx(\"div\", {\n      className: \"table-img-wrapper\"\n    }, __jsx(\"img\", {\n      src: process.env.PUBLIC_URL + item.coverImage,\n      alt: \"Product image\"\n    }))), __jsx(\"td\", {\n      className: \"table-name\"\n    }, item.name), __jsx(\"td\", {\n      className: \"table-price\"\n    }, formatCurrency(item.price)), __jsx(\"td\", null, __jsx(QuantitySelector, {\n      max: item.quantity,\n      onChange: val => onChangeQuantity(item, val),\n      defaultValue: item.cartQuantity\n    })), __jsx(\"td\", {\n      className: \"table-total\"\n    }, formatCurrency(item.price * item.cartQuantity)), __jsx(\"td\", {\n      className: \"table-remove\"\n    }, __jsx(Tooltip, {\n      title: \"X\\xF3a\"\n    }, __jsx(Button, {\n      onClick: () => showModal(\"Bạn có muốn xóa sản phẩm này khỏi giỏ hàng ?\", item.id),\n      icon: __jsx(\"i\", {\n        className: \"fal fa-times\"\n      })\n    })))))))), __jsx(\"div\", {\n      className: \"cart-footer\"\n    }, __jsx(\"div\", {\n      className: \"cart-footer__promo\"\n    }, __jsx(Form, {\n      name: \"basic\",\n      onFinish: onSubmitCoupon,\n      onFinishFailed: onSubmitCouponFailed\n    }, __jsx(Form.Item, {\n      name: \"promo\",\n      rules: [{\n        required: true,\n        message: \"Vui lòng nhập mã voucher !\"\n      }]\n    }, __jsx(Input, {\n      placeholder: \"M\\xE3 voucher\"\n    })), __jsx(Form.Item, null, __jsx(Button, {\n      type: \"primary\",\n      htmlType: \"submit\"\n    }, \"Nh\\u1EADp\")))), __jsx(Button, {\n      className: \"cart-footer__update\",\n      type: \"primary\"\n    }, __jsx(Link, {\n      href: process.env.PUBLIC_URL + \"/shop/shop-3-column\"\n    }, __jsx(\"a\", null, \"C\\u1EADp nh\\u1EADt\")))), __jsx(\"div\", {\n      className: \"cart-total\"\n    }, __jsx(\"table\", null, __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"T\\u1EA1m t\\xEDnh\"), __jsx(\"td\", null, formatCurrency(calculateTotalPrice(cartState.data)))), __jsx(\"tr\", null, __jsx(\"th\", null, \"V\\u1EADn chuy\\u1EC3n\"), __jsx(\"td\", null, __jsx(\"p\", null, \"Mi\\u1EC5n ph\\xED v\\u1EADn chuy\\u1EC3n\"))), __jsx(\"tr\", null, __jsx(\"th\", null, \"Th\\xE0nh ti\\u1EC1n\"), __jsx(\"td\", null, formatCurrency(calculateTotalPrice(cartState.data)))))), __jsx(\"div\", {\n      className: \"cart-total__checkout\"\n    }, __jsx(Button, {\n      type: \"primary\",\n      shape: \"round\"\n    }, __jsx(Link, {\n      href: process.env.PUBLIC_URL + \"/shop/checkout\"\n    }, __jsx(\"a\", null, \"Mua h\\xE0ng\"))), __jsx(\"span\", null, \"-\"), __jsx(Button, {\n      type: \"link\"\n    }, __jsx(Link, {\n      href: process.env.PUBLIC_URL + \"#\"\n    }, __jsx(\"a\", null, \"Thanh to\\xE1n v\\u1EDBi Paypal\"))))))\n  }), __jsx(PartnerOne, null)), __jsx(Modal, {\n    visible: modalState.visible,\n    onOk: handleOk,\n    onCancel: handleCancel\n  }, __jsx(\"p\", null, modalState.message)));\n}\n\nexport default /*#__PURE__*/React.memo(cart);","map":null,"metadata":{},"sourceType":"module"}